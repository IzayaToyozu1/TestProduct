<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="css/style.css"></link>
    <title></title>
</head>
<body>
    <div class="leftColumn"></div>
    <div class="main">
        <div class="header">
            <div class="boxDatePeriod">
                <div class="datePeriod">
                    <label for="dateFrom">Период С: </label>
                    <input type="datetime-local" id="dateFrom" name="dateFrom"/>
                </div>
                <div class="datePeriod">
                    <label for="dateBefore">До: </label>
                    <input type="datetime-local" id="dateBefore" name="dateBefore"/>
                </div>
            </div>
            <div class="boxObjectShop">
                <div class="datePeriod">
                    <label for="objectType">Объект: </label>
                    <input type="text" id="objectType" name="objectType" />
                    <button type="submit" formmethod="method" id="typeObject">...</button>
                    <button type="submit" formmethod="method" id="button"></button>
                </div>
                <div class="datePeriod">
                    <label for="stage">Этап:</label>
                    <select class="listBox" id="listBoxStage">
                    </select>
                </div>
            </div>
            <div class="boxExecutor">
                <div class="datePeriod">
                    <label>Статус:</label>
                    <select class="listBox" id="statusList"></select>
                </div>
                <dib class="datePeriod">
                    <label>Исполнитель:</label>
                    <select class="listBox" id="executorList"></select>
                </dib>
            </div>
        </div>

        <div class="dataTable">
            <table class="dataTableRepair" id="tableRepair">
            </table>
        </div>

        <div class="infoDataRow"></div>
    </div>
<div class="chatRequest"></div>
<script>
    document.addEventListener('DOMContentLoaded', function () {

        var columnNames = ['ID', '№ заявки', 'Дата подачи', 'Объект', 'Кабинет', 'IP адрес', 'ФИО',
            'Вид работ', 'Исполнитель', 'Дата выполнения', 'Продолжительность', 'Статус', 'Комментарий', 'Кол-во файлов']

        var table = document.getElementById("tableRepair");

        var headerRow = document.createElement('tr');
        columnNames.forEach(function (columnName) {
            var th = document.createElement('th');
            th.textContent = columnName;
            if (columnName == 'Кабинет') {
                th.classList.add('Cabinet')
            }
            headerRow.appendChild(th);
        });

        table.insertAdjacentElement('afterbegin', headerRow);

        fetch("/api/GetRequestAll?start=8-11-2019&end=1-1-2023&typeService=1&withAccess=true")
            .then(response => response.json())
            .then(data => {
                data.forEach(function (item) {



                    var row = table.insertRow();
                    var id = row.insertCell(0);
                    var Number = row.insertCell(1);
                    var DateSubmission = row.insertCell(2);
                    var nameObject = row.insertCell(3);
                    var Cabinet = row.insertCell(4);
                    var ipAddress = row.insertCell(5);
                    var FIO = row.insertCell(6);
                    var cName = row.insertCell(7);
                    var resName = row.insertCell(8);
                    var DateEnd = row.insertCell(9);
                    var countHour = row.insertCell(10);
                    var nameStatus = row.insertCell(11);
                    var strComment = row.insertCell(12);
                    var CountDoc = row.insertCell(13);

                    //Cabinet.classList.add('Cabinet');

                    id.innerHTML = item.id;
                    Number.innerHTML = item.number !== null ? item.number : '';
                    DateSubmission.innerHTML = item.dateSubmission !== null ? item.dateSubmission : '';
                    nameObject.innerHTML = item.nameObject !== null ? item.nameObject : '';
                    Cabinet.innerHTML = item.cabinet !== null ? item.cabinet : '';
                    ipAddress.innerHTML = item.ip_address !== null ? item.ip_address : '';
                    FIO.innerHTML = item.fio !== null ? item.fio : '';
                    cName.innerHTML = item.cName !== null ? item.cName : '';
                    resName.innerHTML = item.resName !== null ? item.resName : '';
                    DateEnd.innerHTML = item.dateEnd !== null ? item.dateEnd : '';
                    countHour.innerHTML = item.countHour !== null ? item.countHour : '';
                    nameStatus.innerHTML = item.nameStatus !== null ? item.nameStatus : '';
                    strComment.innerHTML = item.strComment !== null ? item.strComment : '';
                    CountDoc.innerHTML = item.countDoc !== null ? item.countDoc : '';

                    
                });
            });
    });
</script>
</body>
</html>